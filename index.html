<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudySpark Notes | Class 6-10 NCERT Notes</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="container">
            <nav>
                <div class="logo">
                    <h1>ðŸ“š StudySpark <span>Notes</span></h1>
                </div>
                <ul class="nav-links">
                    <li><a href="#">Home</a></li>
                    <li><a href="#classes">Classes</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
                <div class="cta-buttons">
                    <a href="#" class="btn btn-login" id="loginBtn">Login</a>
                    <a href="#" class="btn btn-primary" id="signupBtn">Sign Up</a>
                    <a href="#" class="btn btn-logout" id="logoutBtn" style="display:none;">Logout</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Rest of your existing HTML content... -->

    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="auth-tabs">
                <button class="tab-btn active" id="loginTab">Login</button>
                <button class="tab-btn" id="signupTab">Sign Up</button>
            </div>
            
            <form id="loginForm" class="auth-form">
                <input type="email" id="loginEmail" placeholder="Email" required>
                <input type="password" id="loginPassword" placeholder="Password" required>
                <button type="submit" class="btn btn-primary">Login</button>
                <p class="auth-footer">Forgot password? <a href="#" id="resetPassword">Reset here</a></p>
            </form>
            
            <form id="signupForm" class="auth-form" style="display: none;">
                <input type="text" id="signupName" placeholder="Full Name" required>
                <input type="email" id="signupEmail" placeholder="Email" required>
                <input type="password" id="signupPassword" placeholder="Password (min. 6 chars)" required>
                <button type="submit" class="btn btn-primary">Sign Up</button>
            </form>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyAUq15ha-Lp9sPqzg78_8RKu4VN8lZgvts",
            authDomain: "studyspark-notes.firebaseapp.com",
            projectId: "studyspark-notes",
            storageBucket: "studyspark-notes.firebasestorage.app",
            messagingSenderId: "1067777786694",
            appId: "1:1067777786694:web:73110295f962872a5a5b47",
            measurementId: "G-ZLL6GKHYD0"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // DOM Elements
        const authModal = document.getElementById("authModal");
        const loginBtn = document.getElementById("loginBtn");
        const signupBtn = document.getElementById("signupBtn");
        const logoutBtn = document.getElementById("logoutBtn");
        const loginTab = document.getElementById("loginTab");
        const signupTab = document.getElementById("signupTab");
        const loginForm = document.getElementById("loginForm");
        const signupForm = document.getElementById("signupForm");
        const closeModal = document.querySelector(".close-modal");
        const resetPassword = document.getElementById("resetPassword");

        // Open Modal
        function openAuthModal() {
            authModal.style.display = "flex";
            loginForm.style.display = "block";
            signupForm.style.display = "none";
            loginTab.classList.add("active");
            signupTab.classList.remove("active");
        }

        // Close Modal
        closeModal.addEventListener("click", () => {
            authModal.style.display = "none";
        });

        // Switch Tabs
        loginTab.addEventListener("click", () => {
            loginForm.style.display = "block";
            signupForm.style.display = "none";
            loginTab.classList.add("active");
            signupTab.classList.remove("active");
        });

        signupTab.addEventListener("click", () => {
            loginForm.style.display = "none";
            signupForm.style.display = "block";
            signupTab.classList.add("active");
            loginTab.classList.remove("active");
        });

        // Login
        loginForm.addEventListener("submit", (e) => {
            e.preventDefault();
            const email = document.getElementById("loginEmail").value;
            const password = document.getElementById("loginPassword").value;

            signInWithEmailAndPassword(auth, email, password)
                .then(() => {
                    alert("Logged in successfully!");
                    authModal.style.display = "none";
                })
                .catch((error) => {
                    alert("Error: " + error.message);
                });
        });

        // Signup
        signupForm.addEventListener("submit", (e) => {
            e.preventDefault();
            const name = document.getElementById("signupName").value;
            const email = document.getElementById("signupEmail").value;
            const password = document.getElementById("signupPassword").value;

            createUserWithEmailAndPassword(auth, email, password)
                .then(() => {
                    alert("Account created! Check your email for verification.");
                    authModal.style.display = "none";
                })
                .catch((error) => {
                    alert("Error: " + error.message);
                });
        });

        // Password Reset
        resetPassword.addEventListener("click", (e) => {
            e.preventDefault();
            const email = prompt("Enter your email to reset password:");
            if (email) {
                sendPasswordResetEmail(auth, email)
                    .then(() => alert("Password reset email sent!"))
                    .catch((error) => alert("Error: " + error.message));
            }
        });

        // Logout
        logoutBtn.addEventListener("click", (e) => {
            e.preventDefault();
            signOut(auth)
                .then(() => alert("Logged out successfully!"))
                .catch((error) => alert("Error: " + error.message));
        });

        // Auth State Listener
        auth.onAuthStateChanged((user) => {
            if (user) {
                loginBtn.style.display = "none";
                signupBtn.style.display = "none";
                logoutBtn.style.display = "block";
            } else {
                loginBtn.style.display = "block";
                signupBtn.style.display = "block";
                logoutBtn.style.display = "none";
            }
        });

        // Button Event Listeners
        loginBtn.addEventListener("click", (e) => {
            e.preventDefault();
            openAuthModal();
        });

        signupBtn.addEventListener("click", (e) => {
            e.preventDefault();
            openAuthModal();
            signupTab.click();
        });
    </script>
</body>
</html>
